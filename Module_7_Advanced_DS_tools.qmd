---
title: "Module 7 | Advanced Data Science Tools"
author: "A. Peralta-Santos"
date: today
date-format: long
format:
  html:
    preview: false
    smooth-scroll: true
    embed-resources: true
    toc: true
    toc-location: left
    number-sections: true
    number-depth: 3
    code_download: true
    code-copy: true
execute:
  warning: false
title-block-style: default
---

```{r pacotes}
#| echo: false
#| include: false

# Packages
required_packages <- c(
                       "tidyverse",
                       "rio",
                       "usethis",
                       "gptstudio"
                       )      

for (pkg in required_packages) {
  # install packages if not already present
  if (!pkg %in% rownames(installed.packages())) {
    install.packages(pkg)
  }
  
  # load packages to this current session 
  library(pkg, character.only = TRUE)
}
remove(required_packages)
remove(pkg)
```

# Introdução

O objetivo deste módulo não será o de ensinar todas as ferramentas disponíveis em R, mas o de guiar quando quiserem avançar para além dos conceitos dos módulos anteriores e para que possam retirar inspiração dos produtos mais recentes com exemplos disponíveis.

# AMBIENTES REPRODUTÍVEIS

A reprodutibilidade é um dos pilares da investigação.
Esta deve ser parte de todo o ciclo de data science.
Para isso é necessário haver *reprodutibilidade computacional*

Isto pode incluir situações como:

- Refazer uma análise
  - Por um colega com outro sistema
  - Pelo individuo noutro local ou tempo
  - Por outros para validação dos nossos resultados
- Reutilização de código
- Colocar código em produção

Para estas situações é necessário estabilidade no ambiente computacional que utilizamos.

Para isso temos o RENV.

```{=html}
<iframe width="780" height="500" src="https://rstudio.github.io/renv/articles/renv.html" title="Introdução ao RENV"></iframe>
```

## RENV

O RENV ajuda na criação de AMBIENTES REPRODUTÍVEIS ISOLADOS do sistema em que correm.

![Sistema de Produção de um Sistema RENV](images/renv.png)

Vantagens:

- Diminuição dos problemas de correr num computador e não noutro
- Não existe atualização automática de pacotes e dependências por isso se novas atualizações quebrarem o nosso projeto.

Desvantagens:

- Necessita de muito espaço

### Como criar?

- Ativar com o comando renv::init()
- Colocar essa opção na 

# INTERMIDIATE QUARTO

## Includes

Em Quarto, o 
Reutilizar conteúdo em Quarto é possível usando o código "{{< include >}}". 

Isto permite reutilizar código de outros documentos sem precisar de copiar e colar código.

```{r}
#| echo: true

# ---
# title: "Relatórios Conjuntos"
# ---
# 
# {{< include Relatório_hospitalA.qmd >}}
# {{< include Relatório_hospitalB.qmd >}}
# 
# Usar os dados e outputs do documentos atuais...
```

## Parameters in Quarto

## HTML e CSS

## Quarto Websites

## Intro to SHINY

## Quarto Dashboards

# GIT E GITHUB - INTRO

## O quê?

## Porquê?

# AUTOMATED REPORTING 

## Task Schedualing (Gestão de tarefas automáticas)

# GENERATIVE AI MODELS IN R Programming

Desde Novembro de 2022 que se têm falado de modelos de inteligência artificial generativa.

Este modelos, um subconjunto da inteligência artificial, são projetados para gerar novos dados que se assemelham a dados existentes. 


### Modelos de Linguagem de Grande Escala (LLMs) na Programação

LLMs como o ChatGPT ganharam atenção significativa pela sua capacidade de compreender e gerar texto semelhante ao humano. 

Na programação e na gestão de dados, estes modelos podem ser aproveitados para escrever código, filtrar código ou explicar pedaços de código complexos. O seu entendimento de linguagem natural e linguagens de programação permite que elevar as capacidades dos utilizadoreses de maneira conversacional, com o potencial de aumentar significativamente a produtividade.

Vantagens:

- Gerar código ou adaptar código de outras linguas para R
- Apoiar na gestão de erros ou bugs
- Documentação e Explicação: A leitura da documentação por vezes é dificil numa fase inicial e os modelos permitem baixar a complexidade na leitura e explicar pedaços de código com múltiplos níveis de complexidade.

Limitações:

- Apesar de em códigos simples gerar poucos erros, existe a possibilidade do mesmo não seguir as boas práticas e ser optimizado para um melhor desempenho.
  - Ex: Quando a pedir código de Data cleaning e Wrangling o CHAT GPT por vezes escolhe R base que é mais dificil de compreender.
- Comprensão do Contexto: Quanto tempos documentos mais longos com múltiplas peças (ex: aplicações Shiny, múltiplos documentos Quarto) o ChatGPT dificilmente conseguirá compreder os nossos requisitos no prompt
- Depedência: O ChatGPT deve ser um ferramenta para impulsionar a nossa aprendizagem da lingua e não ser a única ferramenta que utilizamos
- Diferentes resultados para as mesmas perguntas.
- Limitações temporais
- Questões Éticas e Partilha de dados sensíveis.

Existem múltplas LLM mas o mais conhecido é o CHAT-GPT

```{=html}
<iframe width="780" height="500" src="https://chat.openai.com/" title="LLM as a part for productive programming"></iframe>
```

Podemos pedir ao ChatGPT para nos elaborar uma função que calcule o BMI a partir de uma idade e altura.

```{r}


```

A fase seguinte poderá ser a da integração de LLM nas nossas ferramentas de programação. Ex: RSTUDIO

Existe o Copilot in RSTUDIO mas é pago.

![Localização da Configuração do Copilot](images/copilot.png)

## Como colocar o CHAT GPT no Rstudio - Não funciona

O processo ainda não está muito otimizado mas colocamos os passos para instalar o add-in GPTSTUDIO:

1. Necessário criar conta com a OpenAI
2. Criar [API com a OPENAI](https://platform.openai.com/api-keys)
3. Instalar o pacote usethis e correr o seguinte código  usethis::edit_r_environ()
4. Criar variável OPENAI_API_KEY="api-key"

:::{.callout-warning}
Nunca colocar a API num reposirório público.
:::

5. Reiniciar a sessão
6. Correr o Add-in do GPTStudio

:::{.callout-warning}
Para já não recomendamos este uso enquanto as ferramentas não estabilizarem no RSTUDIO.
:::

```{r}
# Criar API da OpenAI
# https://platform.openai.com/api-keys
# Copiar a api key

# usethis::edit_r_environ()
# Adicionar e guardar a seguinte linha de código
#OPENAI_API_KEY="api-key" copiada de cima
# Sys.getenv("OPENAI_API_KEY")
# Gptstudio deve estar nos add-ins 

```

## Ferramentas 

```{=html}
<iframe width="780" height="500" src="https://analytica.shinyapps.io/codelingo/" title="Tradução de linguas de programação"></iframe>
```

# Fim